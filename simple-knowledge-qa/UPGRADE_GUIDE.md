# üîÑ Upgrade to Gemini Version

If you already have the project running, here's how to add Gemini support:

---

## Option 1: Fresh Start (Easiest)

1. **Download new ZIP** (simple-knowledge-qa-gemini.zip)
2. **Extract** to a new folder
3. **Follow GEMINI_SETUP.md**

---

## Option 2: Update Existing Project

### Step 1: Update Files

**In your existing project folder**, replace these 3 files:

1. **app.py** - Updated with Gemini integration
2. **requirements.txt** - Added Gemini SDK
3. **.env.example** - Added Gemini API key

**Add these new files:**

4. **GEMINI_SETUP.md** - Setup instructions
5. **.env** - Your API key (create from .env.example)

### Step 2: Get Gemini API Key

1. Go to: https://makersuite.google.com/app/apikey
2. Click "Create API Key"
3. Copy your key (starts with `AIza...`)

### Step 3: Create .env File

```bash
# In VS Code terminal
cp .env.example .env
```

Then edit `.env`:
```
GEMINI_API_KEY=AIzaSyD_your_actual_key_here
PORT=8000
```

### Step 4: Update Dependencies

```bash
# Stop the server first (Ctrl+C)

# Update packages
pip install -r requirements.txt --upgrade
```

### Step 5: Restart Server

```bash
python app.py
```

You should see:
```
‚úÖ Google Gemini initialized successfully
```

### Step 6: Test It

Go to: http://localhost:8000/docs

1. Upload a document
2. Ask a question
3. Get a **natural language answer** instead of raw chunks!

---

## What Changed?

### Before (Retrieval Only)
```json
{
  "answer": "Supervised learning involves training a model on labeled data. For example...",
  "source": "machine-learning.txt",
  "similarity": 0.8234
}
```
‚ùå Just returns a chunk of text

### After (With Gemini)
```json
{
  "answer": "Supervised learning is a type of machine learning where the algorithm learns from labeled training data. The model is trained on examples that have known correct outputs, allowing it to learn patterns and make predictions on new, unseen data. Common applications include spam detection and image classification.",
  "source": "machine-learning.txt",
  "similarity": 0.8234,
  "mode": "gemini",
  "sources_used": ["machine-learning.txt"]
}
```
‚úÖ Natural, coherent answer generated by AI!

---

## Quick Test Commands

```bash
# Check Gemini is working
curl http://localhost:8000/status

# Should show:
# "llm": {"provider": "Google Gemini", "status": "healthy"}
```

```bash
# Ask a question
curl -X POST http://localhost:8000/ask \
  -H "Content-Type: application/json" \
  -d '{"question": "What is machine learning?"}'

# Should get natural language answer with mode: "gemini"
```

---

## Troubleshooting

### "GEMINI_API_KEY not set"
- Make sure you created `.env` file
- Make sure you added your actual API key
- Restart the server

### Still getting raw chunks?
- Check `/status` endpoint - LLM should show "healthy"
- Look at response `"mode"` field - should say "gemini"
- Check server logs for errors

### Need to keep both versions?
- Old version = retrieval only (no API key needed)
- New version = Gemini-powered (needs API key)
- Both work! Choose based on your needs.

---

## Your Uploaded Documents Are Safe

Don't worry! Your uploaded documents in `/uploads` and FAISS index in `/vector_store` are NOT affected by this update. Everything will work as before, just with better answers!

---

## Deployment with Gemini

When deploying to Render, add environment variable:

- Variable: `GEMINI_API_KEY`
- Value: Your actual API key

---

Ready to get better answers? Follow the steps above! üöÄ
